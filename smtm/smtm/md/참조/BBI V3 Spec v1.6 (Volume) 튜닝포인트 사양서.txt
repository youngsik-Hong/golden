BBI V3 Spec v1.6 (Volume)
튜닝 포인트 사양서 (Tuning Specification)
===============================================

이 문서는 BBI V3 Spec v1.6 전략을 실제 시장 또는 백테스트 환경에서
최적화하기 위해 조절할 수 있는 모든 파라미터와,
각 파라미터 변화가 전략에 미치는 영향을 명확히 설명한다.

튜닝 항목은 총 5개 카테고리로 구성된다:
1) 리스크 제어
2) 물타기 타이밍(DCA)
3) 볼륨 스파이크 / 늦은 차수 필터
4) 익절 / 랠리 트레일링
5) 진입 빈도 / 쿨다운 / 필터

각 항목은 **기본값 / 추천 튜닝 범위 / 목적 / 변화 효과**를 포함한다.


------------------------------------------------------------
1. 리스크 제어 (Loss Control)
------------------------------------------------------------

[1-1] EMERGENCY_STOP_LOSS  
- 설명: 1~2차 포지션에서만 발동하는 비상 손절 조건.  
- 기본값: 0.08 (즉, -8%)  
- 추천 튜닝 범위: 0.06 ~ 0.10  
- 작아지면: 손절이 빨라져 손실 폭 감소, 그러나 승률 하락 가능.  
- 커지면: 더 오래 버티며 반등 기회를 줌, 그러나 대형 손실 위험 증가.  

[1-2] EMERGENCY_STOP_MAX_BUY_COUNT  
- 설명: 몇 차수까지 비상 손절을 허용할 것인가.  
- 기본값: 2 (1~2차까지만 적용)  
- 권장: 변경하지 않음.  

[1-3] MAX_LOSS_AFTER_5TH  
- 설명: 5차까지 모두 진입한 뒤 확정 손절을 실행하는 임계값.  
- 기본값: 0.02 (-2%)  
- 추천 튜닝 범위: 0.015 ~ 0.03  
- 작아지면: 손실 최소화, 그러나 반등 직전 털리고 나올 가능성 증가.  
- 커지면: 더 오래 버티고 회복 가능, 그러나 대형 손실 위험 증가.


------------------------------------------------------------
2. 물타기 타이밍 (DCA Timing)
------------------------------------------------------------

[2-1] DRAWDOWN_THRESHOLDS  
- 설명: 각 차수가 추가 매수되기 위한 평단 대비 손실률 조건.  
- 기본값: [0.0, 0.02, 0.03, 0.04, 0.05]  
- 추천 튜닝 범위:  
    보수형: [0.0, 0.025, 0.035, 0.045, 0.055]  
    공격형: [0.0, 0.015, 0.025, 0.035, 0.045]  
- 작아지면: 물타기가 빨라져 평균단가 빠르게 낮아짐.  
- 커지면: 깊은 반등 자리에서만 물타기 → 물타기 횟수 감소, 안정성 증가.

[2-2] BUY_WEIGHTS  
- 설명: 각 차수의 매수 비중 (총 약 60% 예산)  
- 기본값: [7.0, 5.0, 3.6, 2.4, 2.0]  
- 튜닝 방향:  
    - 1·2차 비중 증가 → 초기 진입 더 공격적  
    - 4·5차 비중 증가 → 아래쪽에서 더 강하게 베팅  
- 주의: 총합이 너무 커지면 리스크 급증.

[2-3] BUY_COOLDOWN_TICKS  
- 설명: 매수 후 다음 매수까지 최소 대기 시간  
- 기본값: 15  
- 추천값: 10, 15, 20  
- 작아지면: 물타기 속도 증가, 변동성 구간에서 연속 매수 위험 증가.  
- 커지면: 물타기 간격 넓어져 “파동 단위 물타기” 형태로 안정성 증가.


------------------------------------------------------------
3. 볼륨 스파이크 / 늦은 차수 필터
------------------------------------------------------------

[3-1] VOL_SPIKE_FACTOR  
- 설명: 스파이크 판정 기준 → 현재 거래량 ≥ 평균 × factor  
- 기본값: 2.5  
- 추천 범위: 2.0 ~ 3.0  
- 작아지면: 스파이크 더 자주 감지 → 3~5차 물타기 빈도 증가  
- 커지면: 극단 투매 구간에서만 물타기 → 질 ↑, 횟수 ↓

[3-2] VOL_MA_PERIOD  
- 설명: 평균 거래량 계산 기간  
- 기본값: 20  
- 추천 범위: 20 ~ 30  
- 작아지면: 민감하게 반응 → 스파이크 자주 탐지  
- 커지면: 완만한 기준 → 스파이크 줄어듦

[3-3] LATE_* 보수적 지표 필터  
- 설명: 3~5차 물타기에서만 적용하는 stricter filter  
- 기본값:  
    LATE_RSI_LIMIT = 60  
    LATE_MACD_LIMIT = -250000  
    LATE_STOCH_LIMIT = 2.5  
    LATE_EMA_DISTANCE_MIN = 0.37  
- 튜닝 방향:  
    보수형 → RSI 55, MACD -300000, EMA 0.4~0.5  
    공격형 → RSI 65, MACD -200000, EMA 0.3  
- 역할: 스파이크와 함께 “진짜 바닥인지 double-confirm” 효과.


------------------------------------------------------------
4. 익절 / 랠리 트레일링
------------------------------------------------------------

[4-1] BREAKEVEN_EXIT_THRESHOLDS  
- 설명: 차수별 TP (익절 목표 수익률)  
- 기본값: [0.01, 0.009, 0.008, 0.007, 0.006]  
- 추천 세트:  
    스캘핑형 → [0.009, 0.008, 0.007, 0.006, 0.005]  
    스윙형   → [0.012, 0.010, 0.009, 0.008, 0.007]  
- 작아지면: 익절 빨라짐, 거래 회전률 증가, 총수익은 감소 가능.  
- 커지면: 큰 수익 가능, 그러나 TP 도달률 하락.

[4-2] RALLY_START_PROFIT  
- 설명: 급등(랠리) 모드 돌입 기준  
- 기본값: +2%  
- 추천 범위: 1.5% ~ 3%  
- 작아지면: 빨리 랠리 모드 → 이익 보호 강화, 불필요한 조기청산 가능  
- 커지면: 큰 파동만 추적 → 장기 랠리에서 유리

[4-3] RALLY_TRAIL_DROP  
- 설명: 랠리 최고가 대비 하락 허용폭  
- 기본값: -1%  
- 추천 범위: 0.8% ~ 1.5%  
- 작아지면: 더 타이트한 보호, 조기 청산 증가  
- 커지면: 긴 랠리 먹기 가능, 대신 이익 반납 증가.


------------------------------------------------------------
5. 진입 필터 / 쿨다운 / 기타
------------------------------------------------------------

[5-1] ATR_PERCENTILE  
- 설명: 최근 변동성 기준 필터  
- 기본값: 40  
- 추천 범위: 30 ~ 50  
- 작아지면: 진입 기회 증가, 약한 변동성 구간도 포함  
- 커지면: 강변동성 구간에서만 진입 → 품질 높아짐, 빈도 감소.

[5-2] EMA_DISTANCE_PERCENT_MIN  
- 설명: EMA 기준 과매도 정도  
- 기본값: 0.37%  
- 추천 범위: 0.3 ~ 0.5  
- 작아지면: 과매도 판단 완화 → 진입 증가  
- 커지면: 더 강한 과매도만 → 진입 감소, 품질 증가.

[5-3] SELL_COOLDOWN_TICKS  
- 설명: 전량 매도 후 재진입까지 대기 시간  
- 기본값: 5  
- 추천 범위: 3 / 5 / 10  
- 작아지면: 같은 자리에서 재진입 가능성 증가  
- 커지면: 진입 신호 과열 방지, 안정성 증가.


------------------------------------------------------------
6. 튜닝 전략 (추천 방법)
------------------------------------------------------------

튜닝은 다음 순서대로 진행하는 것을 권장한다:

1) 리스크 계층 조정  
   - EMERGENCY_STOP, MAX_LOSS_AFTER_5TH

2) 물타기 타이밍 조정  
   - DRAWDOWN_THRESHOLDS  
   - BUY_COOLDOWN_TICKS  

3) 볼륨·늦은차수 필터 조정  
   - VOL_SPIKE_FACTOR  
   - LATE_*  

4) 익절 및 랠리 구조 조정  
   - BREAKEVEN_EXIT_THRESHOLDS  
   - RALLY_*  

5) 진입 필터·쿨다운 조정  
   - ATR_PERCENTILE  
   - EMA_DISTANCE_PERCENT_MIN  

튜닝 시 **한 번에 한 가지 축만 바꾸는 것**을 강력히 권장한다.
두 가지 이상을 동시에 수정하면 원인 분석이 어려워져 오버피팅 위험이 높아진다.

각 실험은 다음 평가 기준으로 비교한다:
- 승률
- 평균수익률
- MDD(최대낙폭)
- 물타기 평균 횟수, 5차 진입 비율
- 랠리 청산 발생 횟수
- 전체 수익의 변동성

이 사양서를 기반으로 하면 어떤 플랫폼에서도
V16 전략의 튜닝 포인트를 명확히 관리·최적화할 수 있다.

===============================================================
(End of File)
