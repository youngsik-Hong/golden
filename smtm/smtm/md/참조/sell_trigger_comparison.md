# 매도 시점 결정 기준 비교 분석

**핵심 질문**: 매수 후 상승 시 어떤 기준으로 팔 것인가?  
**추천**: 하이브리드 (고정% + 트레일링) 🥇

---

## 📊 비교 대상

```
1. 고정 % 익절 (+0.5%, +1% 등)
2. 피보나치 레벨 (50%, 61.8% 등)
3. 지표 기반 (RSI ≥ 70, MACD 등)
4. 트레일링 스톱 (최고가 -X%)
5. 하이브리드 (분할 + 트레일링)
```

---

## 🎯 옵션 1: 고정 % 익절

### 전략

```
평단가 대비 고정 % 도달 시 매도

예시:
  평단가: 148.3M
  +0.5%: 149.0M
  +1.0%: 149.8M
  +1.5%: 150.5M
```

---

### 장점

```
✓✓✓ 매우 간단
  → 계산 쉬움
  → 실행 쉬움
  
✓✓✓ 명확한 목표
  → 감정 개입 없음
  → 미리 계획 가능
  
✓✓ 일관성
  → 항상 같은 기준
```

---

### 단점

```
⚠️ 시장 상황 무시
  → 저항선 고려 안 함
  → 지지선 고려 안 함
  
⚠️ 추가 상승 놓침
  → 1% 익절 후 2% 상승
  → 기회 상실
  
⚠️ 융통성 부족
  → 급등/급락 대응 못함
```

---

### 실전 예시

```
평단가: 148.3M
목표: +1% (149.8M)

시나리오:
  149.0M → 미도달
  149.5M → 미도달
  149.9M → 도달! 익절
  
  그런데...
  → 150.5M 추가 상승
  → 0.5% 기회 상실
```

---

### 평가

```
단순성: ★★★★★
수익성: ★★★☆☆
안정성: ★★★★☆
적응성: ★★☆☆☆

추천: 초보자, 간단함 선호
```

---

## 🎯 옵션 2: 피보나치 레벨

### 전략

```
피보나치 되돌림 레벨에서 매도

고점: 152M
저점: 146M
평단가: 148.3M (38.2%)

익절 레벨:
  50.0%: 149.0M (+0.47%)
  61.8%: 149.7M (+0.95%)
  78.6%: 150.7M (+1.63%)
```

---

### 장점

```
✓✓✓ 시장 심리 반영
  → 저항선에서 익절
  → 통계적 근거
  
✓✓✓ 저항선 활용
  → 심리적 장벽
  → 반전 포착
  
✓✓ 통계적 근거
  → 50%: 70%+ 확률
  → 61.8%: 50%+ 확률
```

---

### 단점

```
⚠️ 평단가 무시
  → 평단가가 38.2%면 OK
  → 다른 위치면 문제
  
⚠️ 익절가 변동
  → 고점/저점 바뀌면 변경
  → 계산 복잡
  
⚠️ 급락장 한정
  → 정상 시장에서 부적합
```

---

### 평가

```
단순성: ★★★☆☆
수익성: ★★★★☆
안정성: ★★★★☆
적응성: ★★★☆☆

추천: 급락장, 피보나치 이해자
```

---

## 🎯 옵션 3: 지표 기반 (RSI/MACD)

### 전략

```
매수: RSI ≤ 25 (과매도)
매도: RSI ≥ 70 (과매수)

논리:
  대칭적
  과매도 매수 → 과매수 매도
```

---

### 장점

```
✓✓ 시장 모멘텀 반영
✓✓ 논리적 대칭
✓ 천장 포착 가능
```

---

### 단점 (치명적!)

```
⚠️⚠️⚠️ 급락장에서 RSI 70 도달 어려움
  
  예시:
    146M (RSI 13) 매수
    → 149M 반등 (RSI 45)
    → 152M 회복 (RSI 60)
    → RSI 70 대기...
    → 하락 시작 148M (RSI 50)
    → 익절 실패! ❌
    
⚠️⚠️ 익절 시기 매우 늦음
  → RSI 70은 과열 구간
  → 이미 하락 시작할 수 있음
  
⚠️⚠️ 수익 놓칠 위험
  → 대기 중 하락
```

---

### 시뮬레이션

```
2월 급락 반등:
  146M (RSI 13) → 매수 ✓
  149M (RSI 45) → 대기
  151M (RSI 58) → 대기
  148M (RSI 42) → 하락!
  
결과:
  RSI 70 도달 못함
  익절 실패
  손실 -10원
```

---

### 평가

```
단순성: ★★☆☆☆
수익성: ★☆☆☆☆
안정성: ★★☆☆☆
적응성: ★★☆☆☆

추천: 비추천! (급락장 부적합)
```

---

## 🎯 옵션 4: 트레일링 스톱

### 전략

```
최고가 추적
최고가 대비 -X% 하락 시 매도

예시:
  평단가: 148.3M
  최고가: 149M → 150M → 151M
  트레일링 -2%: 147M → 148M → 149M
  
  151M → 149M 하락
  → 트레일링 발동! 매도
```

---

### 장점

```
✓✓✓ 추가 상승 완전 포착
  → 끝까지 추적
  
✓✓✓ 자동 익절
  → 수동 판단 불필요
  
✓✓ 욕심 제어
  → 일정 하락 시 자동 매도
```

---

### 단점 (치명적!)

```
⚠️⚠️ 변동성에 매우 민감
  → 조기 청산 가능
  
⚠️⚠️ 낮은 반등 시 손실
  
  예시: 트레일링 -2%
    최고가: 149M (50% 피보나치)
    트레일링: 146.0M
    → 평단가(148.3M) 이하!
    → 손실 -460원! ❌
    
⚠️ 파라미터 최적화 어려움
  → -2%? -3%? -5%?
  → 상황마다 다름
```

---

### 시나리오별 수익

#### 트레일링 -2%

```
50% 반등 (149M):
  매도: 146.0M
  수익: -460원 ❌
  
61.8% 반등 (149.7M):
  매도: 146.7M
  수익: -320원 ❌
  
100% 회복 (152M):
  매도: 149.0M
  수익: +134원 ✓
```

---

#### 트레일링 -3%

```
50% 반등: -762원 ❌
61.8% 반등: -623원 ❌
100% 회복: -173원 ❌
```

---

#### 트레일링 -5%

```
모든 경우 손실! ❌❌❌
```

---

### 평가

```
단순성: ★★★★☆
수익성: ★★☆☆☆ (위험!)
안정성: ★★☆☆☆ (불안정)
적응성: ★★★★☆

추천: 비추천! (손실 위험)
```

---

## 🎯 옵션 5: 하이브리드 (고정% + 트레일링) ⭐⭐⭐

### 전략

```
1~2단계: 고정 % 익절 (70~80%)
  → 빠른 안정
  → 리스크 제거
  
3단계: 트레일링 (20~30%)
  → 추가 상승 포착
  → 보너스 수익
```

---

### 구성 예시 1: 극보수 (80-20)

```
1단계: +0.3% (148.74M)
  → 40% 익절
  
2단계: +0.5% (149.04M)
  → 40% 익절 (누적 80%)
  
3단계: 트레일링 -2% (20%)
  → +0.5% 도달 후 활성화
```

---

### 구성 예시 2: 보수 (70-30)

```
1단계: +0.5% (149.04M)
  → 40% 익절
  
2단계: +1.0% (149.78M)
  → 30% 익절 (누적 70%)
  
3단계: 트레일링 -2% (30%)
  → +1.0% 도달 후 활성화
```

---

### 장점

```
✓✓✓ 리스크 단계적 제거
  → 80% 빠른 익절
  → 리스크 20%만 남음
  
✓✓✓ 안정 + 수익 균형
  → 80% 확정 수익
  → 20% 보너스 기회
  
✓✓✓ 추가 상승 대응
  → 트레일링으로 포착
  
✓✓ 명확한 목표
  → 1~2단계는 고정
  → 감정 개입 없음
```

---

### 시나리오별 수익 (극보수 80-20)

#### 50% 반등 (149M)

```
1단계: +36원 ✓
2단계: +60원 ✓
트레일링: -92원 ❌

총: +4원 (최소 수익)

분석:
  80% 확정 수익
  트레일링 손실이지만
  전체적으로 플러스
```

---

#### 61.8% 반등 (149.7M)

```
1단계: +36원 ✓
2단계: +60원 ✓
트레일링: -64원 ❌

총: +32원

분석:
  여전히 플러스
```

---

#### 100% 회복 (152M)

```
1단계: +36원 ✓
2단계: +60원 ✓
트레일링: +27원 ✓

총: +123원

분석:
  완벽한 실행!
```

---

### 핵심 통찰

```
1~2단계 익절 = 안전망
→ 최악의 경우에도 플러스

트레일링 = 보너스
→ 손실 가능하지만
→ 전체 수익에 영향 적음
→ 대박 가능성
```

---

### 개선: 트레일링 최저선

```python
# 문제: 트레일링이 평단가 이하로 떨어짐

# 해결: 최저선 설정
trailing_stop = max(
    peak_price * (1 - stop_pct),    # -2%
    avg_price * (1 + min_profit)    # 최소 +0.2%
)

# 결과
50% 반등 (149M):
  기존: 146.0M (손실)
  개선: 148.6M (+0.2%)
  → 손실 방지! ✓
```

---

### 평가

```
단순성: ★★★★☆
수익성: ★★★★☆
안정성: ★★★★★
적응성: ★★★★★

추천: 강력 추천! ⭐⭐⭐
```

---

## 🎯 옵션 6: 하이브리드 (피보나치 + 트레일링)

### 전략

```
1단계: 50% 피보나치 (149M)
  → 50% 익절
  
2단계: 61.8% 피보나치 (149.7M)
  → 30% 익절
  
3단계: 트레일링 (20%)
```

---

### 장점

```
✓ 저항선 활용
✓ 통계적 근거
✓ 트레일링 보너스
```

---

### 단점

```
⚠️ 첫 익절이 늦음
  → 50% = +0.47%
  → 고정 +0.3%보다 늦음
  
⚠️ 확률 낮음
  → 50%: 70%
  → +0.3%: 95%
```

---

### 평가

```
단순성: ★★★☆☆
수익성: ★★★★☆
안정성: ★★★★☆
적응성: ★★★☆☆

추천: 보통 (고정%가 더 나음)
```

---

## 📊 전체 비교

### 2월 급락 반등 시뮬레이션

```
경로: 146M → 149M (50%) → 151M → 148M

결과:
  고정 +1%: 0원 (미도달)
  피보나치 50%: +142원
  지표 RSI≥70: 0원 (미도달)
  트레일링 -2%: -64원 (손실!)
  하이브리드 80-20: +4원 (최소 수익)
```

---

### 100% 회복 시

```
결과:
  고정 +1%: +300원
  피보나치 100%: +749원
  지표 RSI≥70: +500원? (불확실)
  트레일링 -2%: +134원
  하이브리드 80-20: +123원
```

---

### 종합 평가

| 전략 | 간단 | 수익 | 안정 | 적응 | 추천 |
|------|------|------|------|------|------|
| 고정% | ★★★★★ | ★★★☆☆ | ★★★★☆ | ★★☆☆☆ | ⭐⭐ |
| 피보나치 | ★★★☆☆ | ★★★★☆ | ★★★★☆ | ★★★☆☆ | ⭐⭐ |
| 지표 | ★★☆☆☆ | ★☆☆☆☆ | ★★☆☆☆ | ★★☆☆☆ | ❌ |
| 트레일링 | ★★★★☆ | ★★☆☆☆ | ★★☆☆☆ | ★★★★☆ | ❌ |
| 하이브리드 | ★★★★☆ | ★★★★☆ | ★★★★★ | ★★★★★ | ⭐⭐⭐ |

---

## 🎯 최종 추천

### 1순위: 하이브리드 (고정% + 트레일링) 🥇

```
[극보수] 80-20
  +0.3%: 40%
  +0.5%: 40%
  트레일링: 20% (최저선 +0.2%)

특징:
  ✓✓✓ 빠른 80% 익절
  ✓✓✓ 안전성 최고
  ✓✓ 보너스 기회

추천 대상:
  - 안정 중시
  - 빠른 탈출 원함
  - 보수적 투자자
```

---

```
[보수] 70-30
  +0.5%: 40%
  +1.0%: 30%
  트레일링: 30% (최저선 +0.3%)

특징:
  ✓✓ 균형잡힌 익절
  ✓✓ 더 많은 보너스
  ✓ 수익성 향상

추천 대상:
  - 균형 추구
  - 적당한 리스크
  - 일반 투자자
```

---

### 2순위: 고정 % 익절 🥈

```
[단순형]
  +0.5% or +1%: 100%

특징:
  ✓✓✓ 매우 간단
  ✓✓ 명확한 목표
  
단점:
  ⚠️ 추가 상승 못잡음

추천 대상:
  - 초보자
  - 간단함 최우선
```

---

### 3순위: 피보나치 레벨 🥉

```
[피보나치형]
  50% fib: 50%
  61.8% fib: 30%
  78.6% fib: 20%

특징:
  ✓ 저항선 활용
  
단점:
  ⚠️ 첫 익절 늦음

추천 대상:
  - 피보나치 이해자
  - 저항선 중시
```

---

### 비추천

```
❌ 지표 기반 (RSI≥70)
  이유: 급락장 부적합
  
❌ 순수 트레일링
  이유: 손실 위험 높음
```

---

## 📋 파라미터

### 하이브리드 (극보수 80-20)

```python
STRATEGY_NAME = 'hybrid_ultra_conservative'

# 분할 익절
PROFIT_TARGET_LEVELS = [
    {
        'type': 'percent',
        'target': 0.003,        # +0.3%
        'sell_ratio': 0.40,
    },
    {
        'type': 'percent',
        'target': 0.005,        # +0.5%
        'sell_ratio': 0.40,
    },
]

# 트레일링
TRAILING_RATIO = 0.20
TRAILING_ACTIVE_AFTER_PCT = 0.005   # +0.5% 후
TRAILING_STOP_PCT = 0.02            # -2%
TRAILING_MIN_PROFIT = 0.002         # 최소 +0.2%
```

---

### 하이브리드 (보수 70-30)

```python
STRATEGY_NAME = 'hybrid_conservative'

PROFIT_TARGET_LEVELS = [
    {
        'type': 'percent',
        'target': 0.005,        # +0.5%
        'sell_ratio': 0.40,
    },
    {
        'type': 'percent',
        'target': 0.010,        # +1.0%
        'sell_ratio': 0.30,
    },
]

TRAILING_RATIO = 0.30
TRAILING_ACTIVE_AFTER_PCT = 0.010
TRAILING_STOP_PCT = 0.02
TRAILING_MIN_PROFIT = 0.003         # 최소 +0.3%
```

---

## 💡 핵심 통찰

### 왜 하이브리드인가?

```
[문제]
고정%: 추가 상승 놓침
트레일링: 손실 위험

[해결]
하이브리드: 둘의 장점 결합!

  고정% (80%) = 안전망
  → 최악에도 수익
  
  트레일링 (20%) = 보너스
  → 대박 가능성
  → 손실 가능하지만 전체 영향 적음
```

---

### 트레일링 최저선의 중요성

```
[문제]
트레일링만 사용 시
→ 평단가 이하 매도
→ 손실!

[해결]
trailing_stop = max(
    peak * (1 - stop_pct),
    avg * (1 + min_profit)
)

→ 최소 수익 보장!
```

---

### 분할 비율의 의미

```
80-20:
  80% 빠른 익절 = 안정
  20% 트레일링 = 도전
  
70-30:
  70% 익절 = 균형
  30% 트레일링 = 기회

50-50:
  50% 익절 = 리스크
  50% 트레일링 = 도박
  → 비추천!
```

---

## ✅ 구현 체크리스트

```
[ ] 분할 익절 로직
    - 1~2단계 고정 %
    
[ ] 트레일링 활성화
    - 2단계 도달 후
    
[ ] 트레일링 로직
    - 최고가 추적
    - 최저선 설정 (중요!)
    
[ ] 테스트
    - 다양한 시나리오
```

---

## 🎯 실전 적용

### Case 1: 낮은 반등 (50%)

```
하이브리드 80-20:
  1~2단계: +96원 ✓
  트레일링: -92원 (최저선 적용)
  총: +4원
  
결과: 최소 수익 달성
```

---

### Case 2: 중간 반등 (61.8%)

```
하이브리드 80-20:
  1~2단계: +96원 ✓
  트레일링: -64원 (최저선)
  총: +32원
  
결과: 적당한 수익
```

---

### Case 3: 완전 회복 (100%)

```
하이브리드 80-20:
  1~2단계: +96원 ✓
  트레일링: +27원 ✓
  총: +123원
  
결과: 최대 수익!
```

---

## 📊 기대 효과

```
Before (단일 전략):
  고정%: 추가 상승 놓침
  트레일링: 손실 위험

After (하이브리드):
  80% 안전망
  20% 보너스
  → 최악에도 플러스
  → 대박 가능성
  → 완벽한 균형! ✓✓✓
```

---

**매도 시점 결정 완성!** ✅

핵심:
- 하이브리드 (고정% + 트레일링)
- 80% 빠른 익절 = 안전
- 20% 트레일링 = 보너스
- 트레일링 최저선 필수!

모든 상황 대응 가능! 🚀
